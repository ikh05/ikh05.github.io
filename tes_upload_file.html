<input type="file" id="fileInput" accept=".docx" />
<button onclick="uploadDocx()">Upload</button>

<script>
function fileToBase64(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => {
      const base64 = btoa(
        new Uint8Array(reader.result)
          .reduce((data, byte) => data + String.fromCharCode(byte), "")
      );
      resolve(base64);
    };
    reader.onerror = reject;
    reader.readAsArrayBuffer(file);
  });
}

async function uploadDocx() {
  const file = document.getElementById("fileInput").files[0];
  if (!file) return alert("Pilih file .docx dulu");

  const base64 = await fileToBase64(file);

  const res = await fetch("https://github-token-ikh05.netlify.app/.netlify/functions/upload-docx", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      filename: file.name,
      content: base64,
    }),
  });

  const data = await res.json();
  console.log(data);
  alert(data.success ? "Artikel berhasil diupload!" : "Gagal upload: " + data.error);
}
</script>
